# 线程和进程的区别

## 一、定义和概念

**进程**：
- 是操作系统进行资源分配和调度的基本单位
- 代表一个正在运行的程序实例，包含代码、数据和资源（内存、文件句柄等）
- 类似独立的"工作空间"，不同进程资源相互隔离
  > 例如：同时运行的两个应用程序是两个不同进程

**线程**：
- 是进程中的执行单元
- 一个进程可包含多个线程，共享进程资源（内存空间、文件描述符等）
- 类似"工作空间"中的任务执行者
  > 例如：文字处理软件的输入处理线程和自动保存线程

## 二、资源占用

**进程**：
- 占用资源较多
  - 独立内存空间
  - 独立文件描述符表、用户ID和组ID等
- 创建开销大（需分配内存、初始化资源）

**线程**：
- 占用资源较少
  - 共享进程内存空间
  - 仅需少量堆栈空间
- 创建开销小（快速创建/销毁）

## 三、调度和切换

**进程**：
- 由内核调度
- 切换开销大
  - 需保存/恢复整个上下文（内存映像、寄存器状态等）
  > 类似工厂切换生产线需大量准备工作

**线程**：
- 由内核调度
- 切换开销小
  - 仅需保存/恢复执行上下文（寄存器状态、堆栈指针等）
  > 类似生产线切换工人只需调整工具

## 四、并发性和通信

**进程**：
- 并发性较低
- 通信需通过系统机制
  - 管道、消息队列、共享内存等
  - 需额外系统调用和数据复制
  > 例如：进程间通过管道复制数据

**线程**：
- 并发性较高
- 可直接访问共享内存
  - 通信高效但需同步机制
  > 例如：线程间共享变量需互斥操作

## 五、稳定性和安全性

**进程**：
- 稳定性高
  - 资源隔离，错误不影响其他进程
  - 崩溃可独立终止

**线程**：
- 稳定性较低
  - 共享资源，错误可能导致进程崩溃
  - 需谨慎处理同步和错误